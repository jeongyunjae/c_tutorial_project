# 입력과 출력
## 목차
[1. 서론](#서론)  
[2. 입력](#입력)  
[3. 출력](#출력)  
[4. 파일 입출력](#파일-입출력)    

## 서론 
프로그램을 작성할 때 따로 연결해주지 않았는데 자연스럽게 키보드를 통해 입력을 하고 결과를 모니터로 확인합니다.

이런 연결을 C 프로그램에서 어떻게 키보드에서 입력을 받고 모니터에 출력을 할까요?

입출력 함수들은 `#include <stido.h>` 를 통해 호출할 수 있습니다.    

## 스트림

C 프로그램에선 입출력 장치와 바로 연결하는 게 아닌 `스트림(stream)`을 통해서 주고 받습니다.   

`스트림`이란 바이트들의 흐름으로 입력과 출력을 할 시에 연속된 바이트들을 받아올 수 있습니다. 

`스트림`이라는 개념을 사용하기 때문에 입출력 장치가 파일, 키보드, 문자열 어떤 것이든 동일한 방식으로 사용 가능합니다.  

## 버퍼

입출력 함수들은 데이터들을 한문자씩 처리하는게 아니라 `버퍼(buffer)`에 저장해두었다가 입출력이 끝나면 사용합니다.

`버퍼`는 데이터를 임시로 모아두는 메모리 공간입니다.

데이터를 `버퍼`에 저장했다가 프로그램에서 사용되는 것을 `버퍼링(buffering)`이라고 합니다.

`버퍼`를 사용하는 이유는 데이터 전송의 효율성 때문입니다.

문자 하나가 입출력 될때마다 바로 받아오고 넘겨준다면 100개의 글자를 쓴다면 100번을 전송해야합니다.

하지만 지정한 크기에 따라 예를 들어 20개의 글자가 `버퍼`에 차면 이동한다고 하면 5번의 전송만해도 됩니다.

`버퍼` 중에서 입력에 연관된 것을 `입력 버퍼` 혹은 `stdin` 이라고 부릅니다.

`입력 버퍼`는 기본적으로 키보드를 통해 입력을 받는데 입력 종료 기준을 `Enter`로 잡습니다.

따라서 `Enter` 에 해당하는 `\n` 문자가 들어가면 `버퍼`에 차 있는 데이터들을 사용하게 됩니다.

함수에 따라서 `Tab` 이나 `Space` 도 종료 기준으로 잡습니다.



## 입력
기본적으로 표준 입력 장치는 `키보드`로 설정되어있습니다.

## 표준 입력
처음 C 언어를 배울 때부터 사용했던 `scanf()`는 입력을 제어할 수 있는 표준 입력 함수입니다.  

`scanf()`는 표준 입력 장치인 키보드로부터 입력을 받아 올 수 있습니다.  

`scanf()`를 사용할때는 받아올 문자열에 대한 서식과 문자를 담을 포인터를 인자로 받습니다. 

배열이나 문자열의 경우에는 변수 이름을 쓰고 아닌 경우 & 연산자를 통해 주소를 넘겨줍니다.  

>scanf 예
```c
scanf("%d %s", &num ,str);
```

|변환문자|입력 형태|
|---|---|
|%c|문자|
|%d|정수|
|%s|문자열|
|%f|실수|

## 문자 입력
문자를 하나 받아오고 싶을 때 `getchar()`함수를 사용합니다.

`getchar()`의 반환 값으로 들어온 문자를 확인할 수 있습니다.
>getchar 예
```c
char c = getchar();
```

## 문자열 입력
문자열을 입력받고 싶을 때 `gets_s()` 함수를 사용합니다.

`Enter`가 입력되기 전까지나 지정해준 크기까지 입력받습니다.

>gets_s 예
```c
char arr[10];
gets_s(arr);
gets_s(arr,5);
```

## 출력
기본적으로 표준 출력 장치는 `모니터`로 설정되어있습니다.

## 표준 출력
`Printf()`는 출력을 제어할 수 있는 표준 출력 합수입니다.

`printf()`는 표준 출력 장치인 모니터로 출력 할 수 있습니다.  

`printf()`를 사용할때는 출력할 문자열에 대한 서식과 문자에 대한 값을 인자로 받습니다.

값으로는 변수 이름과 상수등을 넘겨줄 수 있습니다.

>printf 예
```c
printf("Hello this year is %d", 2019);
```
## 문자 출력
문자를 하나 출력할 때 putchar() 함수를 사용합니다.

>putchar 예
```c
putchar('a');
```

## 문자열 출력
문자열을 출력할 때 `puts()` 함수를 사용합니다.  

`puts()` 함수는 자동으로 끝날 때 개행문자를 포함해 출력합니다.  

>puts 예
```c
puts("Hello World!");
```


## 파일 입출력
표준 입력의 경우 따로 연결하지 않아도 연결되지 않지만 파일의 경우 연결해줘야합니다.  

연결할 파일을 가리킬 파일 포인터형을 선언하고 `fopen()` 함수에 파일이름과 옵션을 주면 됩니다.

`fopen()` 함수는 성공적으로 파일을 열었다면 `FILE` 객체에 대한 포인터를 반환합니다.

하지만 파일을 열지 못했다면 `NULL` 포인터를 리턴합니다.


> fopen 예

```c 
FILE * fp;
fp = fopen("a.txt", "W");
// 기본적인 사용 방법

if ((fp = fopen("example.txt", "w")) == NULL) 
{
    printf("파일 읽기 오류! \n");
    return 0;
}
// 파일이 성공적으로 열려있는지 확읺하면서 여는것이 좋습니다.
```


|옵션|설명|
|---|---|
|"r"|읽기 전용 모드|
|"w"|쓰기 모드|
|"a"|추가 모드|

파일을 열고 사용한 뒤에는 `fclose()` 함수를 이용해 닫아줘야합니다.  

`fclose()` 로 닫아줘야 잘못된 접근으로 의도치 않게 파일 스트림에 접근해 파일이 수정되지 않습니다. 

> fclose 예
```c
fclose(fp);
```

## 파일 입력과 출력
`printf()` 함수와 `scanf()` 함수가 표준 입출력을 하게 해준다면 파일에서도 비슷한 기능을 하는 함수들이 있습니다.  

`fprintf()` 함수와 `fscanf()` 는 첫번째 인자로 파일 포인터를 추가로 받고 같은 기능을 합니다.

> fprintf() 와 fscanf() 예
```c
fprintf(fp,"Hello World!");
// fp 파일 포인터와 연결된 파일에 Hello World! 출력

fscanf(fp, "%d %s", &num, str);
// fp 파일 포인터와 연결된 파일로부터 숫자 하나와 문자열을 입력받습니다.
```

## 연속된 자료형 입출력
파일에 구조체나 배열의 여러개 원소를 입출력 할 수도 있습니다.  

`fwrite()` 함수는 파일에 연속된 자료형을 원하는 수만큼 입력하는 함수입니다.   

`fwrite()` 함수는 배열을 가리키는 포인터, 배열 원소의 크기, 배열 원소의 수, 파일 포인터를 받습니다.

>fwrite() 예
```c
int arr[10];
fwrite(arr, 4, 10, fp);
// int형 배열 arr의 10개의 원소를 fp 에 입력합니다.
```

`fread()` 함수는 파일에서 연속된 자료형을 원하는 수만큼 받는 함수입니다.  

`fread()` 함수는 배열을 가리키는 포인터, 배열 원소 * 배열 원소의 수의 크기, 배열 원소의 수, 파일 포인터를 받습니다.

>fwrite() 예
```c
int arr[10];
fread(arr, 4, 10, fp);
// fp에서 int형 10개의 원소를 arr에 읽어옵니다.
```

## 파일 위치 접근
파일을 처음 열어서 작성하는게 아니라 작성된 파일을 읽고 쓸 때 처음부터가 아닌 중간부터 작성할 수 도 있습니다.

따라서 파일에서 원하는 위치에 데이터를 입력하고 출력할려면 파일의 위치를 확인하고 이동하는 함수가 필요합니다.

## 파일 위치 확인
`ftell()` 함수는 파일에서 현재 위치 값을 반환합니다.

> ftell() 예
```c
int pos;
pos = ftell(fp);
```

## 파일 위치 이동
`fseek()` 함수는 파일에서 원하는 위치로 이동하는 함수입니다.
`fseek()` 함수는 파일 포인터, 이동할 거리, 이동할 기준을 인자로 받습니다.

> fseek() 예
```c
   fseek(fp, 4, 1);
   // 현재 위치에서 4만큼 이동합니다. 
   fseek(fp, -4, 2);
   // 파일의 끝에서 -4만큼 이동합니다.
```

|이동할 기준|<center>설명|
|:-:|---|
|0|처음 위치를 기준으로 합니다.|
|1|현재 위치를 기준으로 합니다.|
|2|파일의 끝을 기준으로 합니다.|

### 다음 단계
- [실습문제로...](./실습문제.md)
- [중간점검 문제로...](../중간점검%20(6강%20-%2010강))
- [다음 강좌로...](../11강%20-%20고급%20프로그래밍/강의자료.md)
